<?php
 class Ldb2x{ const version="\x32\x78\x2e\x34\x2e\x31"; protected $database=null; protected $tables=null; private $dir=null; private $db_dir=null; private $dump_dir=null; private $temp_dir=null; private $bid=null; private $cid=null; private $login=false; public $time=null; public $microtime=null; public $error=false; public $aid=0; public function __construct($db=null){ if(!is_string(${"\x64\x62"})||!preg_match("\x2f\x5e\x5b\x61\x2d\x7a\x30\x2d\x39\x5d\x2b\x24\x2f\x69",${"\x64\x62"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x49\x6e\x76\x61\x6c\x69\x64\x20\x64\x61\x74\x61\x62\x61\x73\x65"; return false; } ${"\x74\x68\x69\x73"}->{"\x74\x69\x6d\x65"}=time(); ${"\x74\x68\x69\x73"}->{"\x6d\x69\x63\x72\x6f\x74\x69\x6d\x65"}=microtime(true); ${"\x74\x68\x69\x73"}->{"\x62\x69\x64"}=452373300; ${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}=dechex(${"\x74\x68\x69\x73"}->{"\x74\x69\x6d\x65"}-${"\x74\x68\x69\x73"}->{"\x62\x69\x64"}); ${"\x74\x68\x69\x73"}->{"\x64\x61\x74\x61\x62\x61\x73\x65"}=${"\x64\x62"}; ${"\x74\x68\x69\x73"}->{"\x73\x65\x74\x74\x69\x6e\x67"}(); ${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}=true; ${"\x74\x68\x69\x73"}->{"\x73\x68\x6f\x77\x5f\x74\x61\x62\x6c\x65\x73"}(); } public function insert($table,$data=array()){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; }elseif(!is_array(${"\x64\x61\x74\x61"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x61\x72\x72\x61\x79\x20\x64\x61\x74\x61"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x69\x73\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"})){ ${"\x74\x68\x69\x73"}->{"\x63\x6f\x6e\x76\x65\x72\x74\x54\x6f\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"}); return ${"\x74\x68\x69\x73"}->{"\x69\x6e\x73\x65\x72\x74"}(${"\x74\x61\x62\x6c\x65"},${"\x64\x61\x74\x61"}); } ${"\x74\x68\x69\x73"}->{"\x74\x64\x62"}(${"\x74\x61\x62\x6c\x65"}); ${"\x74\x68\x69\x73"}->{"\x61\x69\x64"}++; ${"\x74\x68\x69\x73"}->{"\x74\x64\x62"}(${"\x74\x61\x62\x6c\x65"},${"\x74\x68\x69\x73"}->{"\x61\x69\x64"}); ${"\x63\x6f\x6c\x75\x6d\x6e"}=["\x61\x69\x64"=>${"\x74\x68\x69\x73"}->{"\x61\x69\x64"}]; foreach($data as $k=>${"\x76"}){ ${"\x63\x6f\x6c\x75\x6d\x6e"}[${"\x6b"}]=${"\x6b"}=="\x70\x61\x73\x73\x77\x6f\x72\x64"?${"\x74\x68\x69\x73"}->{"\x68\x61\x73\x68"}((string)${"\x76"}):(string)${"\x76"}; } ${"\x63\x6f\x6c\x75\x6d\x6e"}["\x74\x69\x6d\x65"]=${"\x74\x68\x69\x73"}->{"\x74\x69\x6d\x65"}; ${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}=dechex(time()); ${"\x63\x6f\x6c\x75\x6d\x6e"}["\x63\x69\x64"]=${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}; ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62\x2b"); if(!${"\x6f"}||!flock(${"\x6f"},LOCK_EX)){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x69\x6e\x73\x65\x72\x74"; return false; } if(fseek(${"\x6f"},0,SEEK_END)===0){ ${"\x77"}=fwrite(${"\x6f"},base64_encode(serialize(${"\x63\x6f\x6c\x75\x6d\x6e"}))."\n"); }flock(${"\x6f"},LOCK_UN);fclose(${"\x6f"}); return isset(${"\x77"})&&$w?true:false; } public function select($table,$where=false){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x69\x73\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"})){ ${"\x74\x68\x69\x73"}->{"\x63\x6f\x6e\x76\x65\x72\x74\x54\x6f\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"}); return ${"\x74\x68\x69\x73"}->{"\x73\x65\x6c\x65\x63\x74"}(${"\x74\x61\x62\x6c\x65"},${"\x77\x68\x65\x72\x65"}); } parse_str(is_string(${"\x77\x68\x65\x72\x65"})?${"\x77\x68\x65\x72\x65"}:'',${"\x69\x6e\x64\x65\x78"}); if(!is_array(${"\x69\x6e\x64\x65\x78"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x43\x61\x6e\x6e\x6f\x74\x20\x66\x69\x6e\x64\x20\x69\x6e\x64\x65\x78\x20\x74\x61\x62\x6c\x65"; return false; } ${"\x68\x61\x73\x69\x6c"}=array(); ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62"); while(!feof(${"\x6f"})){ ${"\x67"}=fgets(${"\x6f"}); ${"\x64"}=unserialize(base64_decode(trim(${"\x67"}))); if(!is_array(${"\x64"})){continue;} if(0==count(${"\x69\x6e\x64\x65\x78"})){ ${"\x68\x61\x73\x69\x6c"}[]=${"\x64"}; continue; }${"\x73\x74\x6f\x72\x65"}=0; foreach($index as $k=>${"\x76"}){ if(isset(${"\x64"}[${"\x6b"}])&&$d[${"\x6b"}]==${"\x76"}){ ${"\x73\x74\x6f\x72\x65"}+=1; } }if(${"\x73\x74\x6f\x72\x65"}==count(${"\x69\x6e\x64\x65\x78"})){${"\x68\x61\x73\x69\x6c"}[]=${"\x64"};} }fclose(${"\x6f"}); return ${"\x68\x61\x73\x69\x6c"}; } public function update($table,$where=false,$data=array()){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; }elseif(!is_string(${"\x77\x68\x65\x72\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x73\x74\x72\x69\x6e\x67\x20\x77\x68\x65\x72\x61\x6e\x63\x65"; return false; }elseif(!is_array(${"\x64\x61\x74\x61"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x61\x72\x72\x61\x79\x20\x64\x61\x74\x61"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x69\x73\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"})){ ${"\x74\x68\x69\x73"}->{"\x63\x6f\x6e\x76\x65\x72\x74\x54\x6f\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"}); return ${"\x74\x68\x69\x73"}->{"\x75\x70\x64\x61\x74\x65"}(${"\x74\x61\x62\x6c\x65"},${"\x77\x68\x65\x72\x65"},${"\x64\x61\x74\x61"}); } ${"\x69\x6e\x64\x65\x78"}=explode("\x3d",${"\x77\x68\x65\x72\x65"}); if(!is_array(${"\x69\x6e\x64\x65\x78"})||!isset(${"\x69\x6e\x64\x65\x78"}[1])){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"} = "\x43\x61\x6e\x6e\x6f\x74\x20\x66\x69\x6e\x64\x20\x69\x6e\x64\x65\x78\x20\x74\x61\x62\x6c\x65"; return false; } ${"\x74\x65\x6d\x70"}=${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2d".${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}."\x2e\x74\x6d\x70"; ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62"); ${"\x74"}=fopen(${"\x74\x65\x6d\x70"},"\x77\x62"); if(!${"\x6f"}||!flock(${"\x6f"},LOCK_EX)){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x75\x70\x64\x61\x74\x65"; return false; }${"\x72\x65\x73"}=0; while(!feof(${"\x6f"})){ ${"\x67"}=fgets(${"\x6f"}); ${"\x64"}=unserialize(base64_decode(trim(${"\x67"}))); if(isset(${"\x64"}[${"\x69\x6e\x64\x65\x78"}[0]])&&$d[${"\x69\x6e\x64\x65\x78"}[0]]==${"\x69\x6e\x64\x65\x78"}[1]){ foreach($d as $k=>${"\x76"}){ if(isset(${"\x64\x61\x74\x61"}[${"\x6b"}])){ ${"\x64"}[${"\x6b"}]=${"\x6b"}=="\x70\x61\x73\x73\x77\x6f\x72\x64"?${"\x74\x68\x69\x73"}->{"\x68\x61\x73\x68"}(${"\x64\x61\x74\x61"}[${"\x6b"}]):${"\x64\x61\x74\x61"}[${"\x6b"}]; } }${"\x67"}=base64_encode(serialize(${"\x64"}))."\n"; } fwrite(${"\x74"},${"\x67"}); ${"\x72\x65\x73"}+=1; }flock(${"\x6f"},LOCK_UN); fclose(${"\x6f"}); fclose(${"\x74"}); ${"\x63\x6f\x70\x79"}=@copy(${"\x74\x65\x6d\x70"},${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}); if(is_file(${"\x74\x65\x6d\x70"})){@unlink(${"\x74\x65\x6d\x70"});} return ${"\x63\x6f\x70\x79"}?${"\x72\x65\x73"}:false; } public function delete($table,$where=false){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; }elseif(!is_string(${"\x77\x68\x65\x72\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x77\x68\x65\x72\x61\x6e\x63\x65"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x69\x73\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"})){ ${"\x74\x68\x69\x73"}->{"\x63\x6f\x6e\x76\x65\x72\x74\x54\x6f\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"}); return ${"\x74\x68\x69\x73"}->{"\x64\x65\x6c\x65\x74\x65"}(${"\x74\x61\x62\x6c\x65"},${"\x77\x68\x65\x72\x65"}); } ${"\x69\x6e\x64\x65\x78"}=explode("\x3d",${"\x77\x68\x65\x72\x65"}); if(!is_array(${"\x69\x6e\x64\x65\x78"})||!isset(${"\x69\x6e\x64\x65\x78"}[1])){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"} = "\x43\x61\x6e\x6e\x6f\x74\x20\x66\x69\x6e\x64\x20\x69\x6e\x64\x65\x78\x20\x74\x61\x62\x6c\x65"; return false; } ${"\x74\x65\x6d\x70"}=${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2d".${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}."\x2e\x74\x6d\x70"; ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62"); ${"\x74"}=fopen(${"\x74\x65\x6d\x70"},"\x77\x62"); if(!${"\x6f"}||!flock(${"\x6f"},LOCK_EX)){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x64\x65\x6c\x65\x74\x65"; return false; }${"\x72\x65\x73"}=0; while(!feof(${"\x6f"})){ ${"\x67"}=fgets(${"\x6f"}); ${"\x64"}=unserialize(base64_decode(trim(${"\x67"}))); if(isset(${"\x64"}[${"\x69\x6e\x64\x65\x78"}[0]])&&$d[${"\x69\x6e\x64\x65\x78"}[0]]==${"\x69\x6e\x64\x65\x78"}[1]){continue;} fwrite(${"\x74"},${"\x67"}); ${"\x72\x65\x73"}+=1; }flock(${"\x6f"},LOCK_UN); fclose(${"\x6f"}); fclose(${"\x74"}); ${"\x63\x6f\x70\x79"}=@copy(${"\x74\x65\x6d\x70"},${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}); if(is_file(${"\x74\x65\x6d\x70"})){@unlink(${"\x74\x65\x6d\x70"});} return ${"\x63\x6f\x70\x79"}?${"\x72\x65\x73"}:false; } public function search($table,$key=false){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; }elseif(!isset(${"\x6b\x65\x79"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x6b\x65\x79\x77\x6f\x72\x64\x73"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x69\x73\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"})){ ${"\x74\x68\x69\x73"}->{"\x63\x6f\x6e\x76\x65\x72\x74\x54\x6f\x4c\x64\x62\x58"}(${"\x74\x61\x62\x6c\x65"}); return ${"\x74\x68\x69\x73"}->{"\x73\x65\x61\x72\x63\x68"}(${"\x74\x61\x62\x6c\x65"},${"\x6b\x65\x79"}); } ${"\x69\x6e\x64\x65\x78"}=@explode("\x3d",${"\x6b\x65\x79"}); if(!is_array(${"\x69\x6e\x64\x65\x78"})||!isset(${"\x69\x6e\x64\x65\x78"}[1])){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x43\x61\x6e\x6e\x6f\x74\x20\x66\x69\x6e\x64\x20\x69\x6e\x64\x65\x78\x20\x74\x61\x62\x6c\x65"; return false; } ${"\x68\x61\x73\x69\x6c"}=array(); ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62"); while(!feof(${"\x6f"})){ ${"\x67"}=fgets(${"\x6f"}); ${"\x64"}=unserialize(base64_decode(trim(${"\x67"}))); if(!isset(${"\x64"}[${"\x69\x6e\x64\x65\x78"}[0]])){continue;} ${"\x63"}=stripos(${"\x64"}[${"\x69\x6e\x64\x65\x78"}[0]],${"\x69\x6e\x64\x65\x78"}[1]); if(${"\x63"}===false){continue;} ${"\x68\x61\x73\x69\x6c"}[]=${"\x64"}; }fclose(${"\x6f"}); return ${"\x68\x61\x73\x69\x6c"}; } public function create_table($name=null){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x6e\x61\x6d\x65"}=isset(${"\x6e\x61\x6d\x65"})?${"\x6e\x61\x6d\x65"}:"\x2b"; if(preg_match("\x2f\x5e\x5b\x61\x2d\x7a\x41\x2d\x5a\x30\x2d\x39\x5f\x5d\x2b\x24\x2f\x69",${"\x6e\x61\x6d\x65"},${"\x61\x6b\x75\x72"})){ ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x61\x6b\x75\x72"}[0]."\x2e\x6c\x64\x62"; if(is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x61\x6b\x75\x72"}[0]."\x20\x68\x61\x73\x20\x62\x65\x65\x6e\x20\x65\x78\x69\x73\x74\x65\x64"; return false; } if(!${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x63\x72\x65\x61\x74\x65\x20\x74\x61\x62\x6c\x65\x20".${"\x61\x6b\x75\x72"}[0].''; return false; } ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x74\x68\x69\x73"}->{"\x73\x68\x6f\x77\x5f\x74\x61\x62\x6c\x65\x73"}(); return true; }else{ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x43\x68\x61\x72\x61\x63\x74\x65\x72\x20\x6e\x61\x6d\x65\x20\x69\x73\x20\x6e\x6f\x74\x20\x61\x76\x61\x69\x6c\x61\x62\x6c\x65"; return false; } } public function delete_table($name=null){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x6e\x61\x6d\x65"}=isset(${"\x6e\x61\x6d\x65"})?${"\x6e\x61\x6d\x65"}:"\x2b"; ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x6e\x61\x6d\x65"}."\x2e\x6c\x64\x62"; if(is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ @copy(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"}.${"\x6e\x61\x6d\x65"}."\x5f".${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}."\x2e\x6c\x64\x62"); ${"\x74\x68\x69\x73"}->{"\x74\x64\x62"}(${"\x6e\x61\x6d\x65"},"\x30"); if(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}){@unlink(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"});} ${"\x74\x68\x69\x73"}->{"\x73\x68\x6f\x77\x5f\x74\x61\x62\x6c\x65\x73"}(); return true; }else{ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x6e\x61\x6d\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; } } public function show_tables(){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x73\x64\x69\x72"}=@scandir(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}); ${"\x68\x61\x73\x69\x6c"}=array(); foreach($sdir as $sd){ if(preg_match("\x2f\x5e\x5b\x61\x2d\x7a\x41\x2d\x5a\x30\x2d\x39\x5f\x5d\x2b\x5c\x2e\x6c\x64\x62\x24\x2f\x69",${"\x73\x64"})){ ${"\x68\x61\x73\x69\x6c"}[]=str_replace("\x2e\x6c\x64\x62",'',${"\x73\x64"}); } }return ${"\x74\x68\x69\x73"}->{"\x74\x61\x62\x6c\x65\x73"} = ${"\x68\x61\x73\x69\x6c"}; } public function show_database(){ if(!${"\x74\x68\x69\x73"}->{"\x6c\x6f\x67\x69\x6e"}){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x52\x65\x71\x75\x69\x72\x65\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\x61\x63\x63\x65\x73\x73"; return false; }${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}=false; ${"\x73\x64\x69\x72"}=@scandir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}); ${"\x68\x61\x73\x69\x6c"}=array(); foreach($sdir as $sd){ if(preg_match("\x2f\x5e\x5b\x61\x2d\x7a\x41\x2d\x5a\x30\x2d\x39\x5f\x5d\x2b\x24\x2f\x69",${"\x73\x64"})&&$sd!=="\x2e\x68\x74\x61\x63\x63\x65\x73\x73"&&is_dir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}.${"\x73\x64"})){ ${"\x68\x61\x73\x69\x6c"}[]=${"\x73\x64"}; } }return ${"\x68\x61\x73\x69\x6c"}; } public function valid_password($table,$where,$password){ ${"\x73\x65\x6c\x65\x63\x74"}=${"\x74\x68\x69\x73"}->{"\x73\x65\x6c\x65\x63\x74"}(${"\x74\x61\x62\x6c\x65"},${"\x77\x68\x65\x72\x65"}); if(isset(${"\x73\x65\x6c\x65\x63\x74"}[0],${"\x73\x65\x6c\x65\x63\x74"}[0]["\x70\x61\x73\x73\x77\x6f\x72\x64"])&&$select[0]["\x70\x61\x73\x73\x77\x6f\x72\x64"]==${"\x74\x68\x69\x73"}->{"\x68\x61\x73\x68"}(${"\x70\x61\x73\x73\x77\x6f\x72\x64"})){ return true; }return false; } public function hash($password=null,$algo="\x73\x68\x61\x32\x35\x36"){ ${"\x61\x6c\x67\x6f"}=in_array(${"\x61\x6c\x67\x6f"},hash_algos())?${"\x61\x6c\x67\x6f"}:"\x73\x68\x61\x32\x35\x36"; ${"\x68\x61\x73\x68"}=hash(${"\x61\x6c\x67\x6f"},${"\x70\x61\x73\x73\x77\x6f\x72\x64"},false); return ${"\x68\x61\x73\x68"}; } public function strip_magic($str){ if(is_array(${"\x73\x74\x72"})){ ${"\x68\x61\x73\x69\x6c"}=array(); foreach($str as $k=>${"\x76"}){ ${"\x68\x61\x73\x69\x6c"}[${"\x6b"}]=(get_magic_quotes_gpc())?stripslashes(${"\x76"}):${"\x76"}; }return ${"\x68\x61\x73\x69\x6c"}; }else{ return (get_magic_quotes_gpc())?stripslashes(${"\x73\x74\x72"}):${"\x73\x74\x72"}; } } public function spend_time(){ return @number_format(@microtime(true)-${"\x74\x68\x69\x73"}->{"\x6d\x69\x63\x72\x6f\x74\x69\x6d\x65"},4,"\x2e",''); } private function isLdbX($table=null){ ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; } ${"\x6f"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},"\x72\x62"); ${"\x67"}=fgets(${"\x6f"}); if(${"\x67"}==''){return true;} ${"\x64"}=@unserialize(base64_decode(trim(${"\x67"}))); return is_array(${"\x64"})?true:false; } private function convertToLdbX($table=null){ ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6c\x64\x62"; if(!is_file(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x65\x72\x72\x6f\x72"}="\x54\x61\x62\x6c\x65\x20".${"\x74\x61\x62\x6c\x65"}."\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74"; return false; } ${"\x63\x6f\x6e\x74\x65\x6e\x74"}=@file_get_contents(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}); ${"\x70\x61\x72\x73\x65"}=${"\x74\x68\x69\x73"}->{"\x70\x61\x72\x73\x65\x5f\x63\x6f\x6e\x74\x65\x6e\x74"}(${"\x63\x6f\x6e\x74\x65\x6e\x74"}); ${"\x74\x65\x6d\x70"}=${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2d".${"\x74\x68\x69\x73"}->{"\x63\x69\x64"}."\x2e\x74\x6d\x70"; ${"\x74"}=fopen(${"\x74\x65\x6d\x70"},"\x77\x62");${"\x77"}=0; foreach($parse as $data){ ${"\x77"}+=fwrite(${"\x74"},base64_encode(serialize(${"\x64\x61\x74\x61"}))."\n"); }fclose(${"\x74"}); @copy(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"}.${"\x74\x61\x62\x6c\x65"}."\x2e\x6f\x6c\x64"); @copy(${"\x74\x65\x6d\x70"},${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}); if(is_file(${"\x74\x65\x6d\x70"})){@unlink(${"\x74\x65\x6d\x70"});} return ${"\x77"}; } private function tdb($table,$key=false){ ${"\x74\x64\x62"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}."\x7e\x74\x64\x62\x5f".${"\x74\x61\x62\x6c\x65"}."\x2e\x74\x64\x62"; if(${"\x6b\x65\x79"}){ return ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x64\x62"},${"\x6b\x65\x79"}); }elseif(!is_file(${"\x74\x64\x62"})){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x64\x62"},"\x30"); return "\x30"; }else{ ${"\x63\x6f\x6e\x74\x65\x6e\x74"}=@file_get_contents(${"\x74\x64\x62"}); ${"\x74\x68\x69\x73"}->{"\x61\x69\x64"}=${"\x63\x6f\x6e\x74\x65\x6e\x74"}; return ${"\x63\x6f\x6e\x74\x65\x6e\x74"}; } } private function write($filename=null,$content='',$type="\x77\x62"){ ${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}=isset(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"})?${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"}:"\x65\x72\x72\x6f\x72\x2d".time()."\x2e\x74\x78\x74"; ${"\x66\x70"}=fopen(${"\x66\x69\x6c\x65\x6e\x61\x6d\x65"},${"\x74\x79\x70\x65"}); if(${"\x66\x70"}&&flock(${"\x66\x70"},LOCK_EX)){ ${"\x77\x72\x69\x74\x65"}=fwrite(${"\x66\x70"},(get_magic_quotes_gpc()?stripslashes(${"\x63\x6f\x6e\x74\x65\x6e\x74"}):${"\x63\x6f\x6e\x74\x65\x6e\x74"})); flock(${"\x66\x70"},LOCK_UN); fclose(${"\x66\x70"}); return ${"\x77\x72\x69\x74\x65"}?true:false; }fclose(${"\x66\x70"}); return false; } private function setting(){ ${"\x4c\x64\x62\x5f\x64\x69\x72"}=str_replace('\\',"\x2f",__DIR__)."\x2f\x4c\x64\x62\x32\x78\x2f"; if(defined("\x4c\x44\x42\x32\x58\x5f\x43\x4c\x49\x5f\x44\x49\x52")&&is_string(LDB2X_CLI_DIR)){ ${"\x4c\x64\x62\x5f\x64\x69\x72"}=str_replace('\\',"\x2f",LDB2X_CLI_DIR); ${"\x4c\x64\x62\x5f\x64\x69\x72"}.=substr(${"\x4c\x64\x62\x5f\x64\x69\x72"},-1)!="\x2f"?"\x2f":''; } ${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}=${"\x4c\x64\x62\x5f\x64\x69\x72"}; if(!is_dir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"},0700); @chmod(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"},0700); } if(!is_file(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73")){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73","\x4f\x70\x74\x69\x6f\x6e\x73\x20\x2d\x49\x6e\x64\x65\x78\x65\x73"."\r\n"."\x64\x65\x6e\x79\x20\x66\x72\x6f\x6d\x20\x61\x6c\x6c"); } ${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}.${"\x74\x68\x69\x73"}->{"\x64\x61\x74\x61\x62\x61\x73\x65"}."\x2f"; if(!is_dir(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"},0700); @chmod(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"},0700); } if(!is_file(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73")){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73","\x4f\x70\x74\x69\x6f\x6e\x73\x20\x2d\x49\x6e\x64\x65\x78\x65\x73"."\r\n"."\x64\x65\x6e\x79\x20\x66\x72\x6f\x6d\x20\x61\x6c\x6c"); } ${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}."\x5f\x64\x75\x6d\x70\x2f"; if(!is_dir(${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"},0700); @chmod(${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"},0700); } if(!is_file(${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73")){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x68\x69\x73"}->{"\x64\x75\x6d\x70\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73","\x4f\x70\x74\x69\x6f\x6e\x73\x20\x2d\x49\x6e\x64\x65\x78\x65\x73"."\r\n"."\x64\x65\x6e\x79\x20\x66\x72\x6f\x6d\x20\x61\x6c\x6c"); } ${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}=${"\x74\x68\x69\x73"}->{"\x64\x62\x5f\x64\x69\x72"}."\x5f\x74\x65\x6d\x70\x2f"; if(!is_dir(${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"},0700); @chmod(${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"},0700); } if(!is_file(${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73")){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x74\x68\x69\x73"}->{"\x74\x65\x6d\x70\x5f\x64\x69\x72"}."\x2e\x68\x74\x61\x63\x63\x65\x73\x73","\x4f\x70\x74\x69\x6f\x6e\x73\x20\x2d\x49\x6e\x64\x65\x78\x65\x73"."\r\n"."\x64\x65\x6e\x79\x20\x66\x72\x6f\x6d\x20\x61\x6c\x6c"); } } private function parse_content($content,$access=4){ ${"\x62\x61\x74\x61\x73\x5f\x72\x6f\x77"} = ${"\x74\x68\x69\x73"}->{"\x62\x61\x74\x61\x73"}("\x72\x6f\x77"); ${"\x62\x61\x74\x61\x73\x5f\x63\x6f\x6c\x75\x6d\x6e"} = ${"\x74\x68\x69\x73"}->{"\x62\x61\x74\x61\x73"}("\x63\x6f\x6c\x75\x6d\x6e"); ${"\x62\x61\x74\x61\x73\x5f\x65\x71\x75\x61\x6c"} = ${"\x74\x68\x69\x73"}->{"\x62\x61\x74\x61\x73"}("\x65\x71\x75\x61\x6c"); ${"\x68\x61\x73\x69\x6c"} = array(); ${"\x72\x6f\x77\x73"} = @explode(${"\x62\x61\x74\x61\x73\x5f\x72\x6f\x77"},${"\x63\x6f\x6e\x74\x65\x6e\x74"}); if(is_array(${"\x72\x6f\x77\x73"})&&count(${"\x72\x6f\x77\x73"})>0){ ${"\x72"}=0; foreach($rows as $row){ if(!empty(${"\x72\x6f\x77"})){ ${"\x63\x6f\x6c\x75\x6d\x6e\x73"} = @explode(${"\x62\x61\x74\x61\x73\x5f\x63\x6f\x6c\x75\x6d\x6e"},${"\x72\x6f\x77"}); if(is_array(${"\x63\x6f\x6c\x75\x6d\x6e\x73"})&&count(${"\x63\x6f\x6c\x75\x6d\x6e\x73"})>0){ foreach($columns as $column){ ${"\x65\x71\x75\x61\x6c"} = @explode(${"\x62\x61\x74\x61\x73\x5f\x65\x71\x75\x61\x6c"},${"\x63\x6f\x6c\x75\x6d\x6e"}); if(isset(${"\x65\x71\x75\x61\x6c"}[0])&&isset(${"\x65\x71\x75\x61\x6c"}[1])){ ${"\x68\x61\x73\x69\x6c"}[${"\x72"}][${"\x65\x71\x75\x61\x6c"}[0]] = ${"\x65\x71\x75\x61\x6c"}[1]; } } } ${"\x72"}++; } } if(${"\x61\x63\x63\x65\x73\x73"}==16){ ${"\x66\x75\x6c\x6c"} = array(); foreach($hasil as $has){ if(is_array(${"\x68\x61\x73"})&&count(${"\x68\x61\x73"})>0){ foreach($has as $key=>${"\x76\x61\x6c"}){ ${"\x66\x75\x6c\x6c"}[${"\x6b\x65\x79"}][${"\x76\x61\x6c"}][] = ${"\x68\x61\x73"}; } } } ${"\x68\x61\x73\x69\x6c"} = ${"\x66\x75\x6c\x6c"}; } }return ${"\x68\x61\x73\x69\x6c"}; } private function batas($key=''){ ${"\x62\x61\x74\x61\x73"} = array( "\x74\x61\x62\x6c\x65"=>"\x2b\x2b\x2b\x2b\x2b\x2b\x2b\x2b\x2b".md5("\x62\x61\x74\x61\x73\x5f\x74\x61\x62\x6c\x65")."\x2b\x2b\x2b\x2b\x2b\x2b\x2b\x2b\x2b", "\x72\x6f\x77"=>"\x2d\x2d\x2d\x2d\x2d".md5("\x62\x61\x74\x61\x73\x5f\x72\x6f\x77")."\x2d\x2d\x2d\x2d\x2d", "\x63\x6f\x6c\x75\x6d\x6e"=>"\x7c\x7c".md5("\x62\x61\x74\x61\x73\x5f\x63\x6f\x6c\x75\x6d\x6e")."\x7c\x7c", "\x65\x71\x75\x61\x6c"=>"\x3d\x3d\x3d".md5("\x62\x61\x74\x61\x73\x5f\x65\x71\x75\x61\x6c")."\x3d\x3d\x3d" ); return array_key_exists(${"\x6b\x65\x79"},${"\x62\x61\x74\x61\x73"})?${"\x62\x61\x74\x61\x73"}[${"\x6b\x65\x79"}]:false; } } 